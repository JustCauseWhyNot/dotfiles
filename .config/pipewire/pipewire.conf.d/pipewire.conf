#context.properties = {
        #default.clock.allowed-rates [ 44100 48000 96000 ]
        #default.clock.min-quantum = 256
        #default.clock.max-quantum = 256
#}

# X2HR Headphone treatment
# SOFA spatialiser fed into autoEQ convolver

context.modules = [
{	name = libpipewire-module-filter-chain
	args = {
		node.passive = out
		stream.dont-remix = true

		filter.graph= = {
			nodes = [
			{
				type = builtin
				name = X2HR-AutoEQL
				label = convolver
				config = {
					#blocksize = ...
					#tailsize = 64
					#gain = 1.0
					delay = 0
					filename = "/home/justcausewhynot/.config/pipewire/pipewire.conf.d/x2hr.wav"
					#offset = ...
					#length = ...
					channel = 1
					resample_quality = 5
				}
			}
			{
				type = builtin
				name = X2HR-AutoEQL
				label = convolver
				config = {
					#blocksize = ...
					#tailsize = 64
					#gain = 1.0
					delay = 0
					filename = "/home/justcausewhynot/.config/pipewire/pipewire.conf.d/x2hr.wav"
					#offset = ...
					#length = ...
					channel = 2
					resample_quality = 5
				}
			}
			}
			capture.props = {
				media.class Audio/Sink
				audio.channels = 2
				audio.position = [ FL FR ]
				node.name = "X2HR Treatment In"
				node.description = "X2HR Treatment In"
				node.virtual = false
				node.passive = out
				stream.dont-remix = false
				steam.properties = {
					channelmix.upmix = false
					channelmix.upmix-method = none
					channelmix.disable = false
					channelmix.lfe-cutoff = 1000
					channelmix.lfe-cutoff - 20000
					channelmix.mix-lfe = false
					channelmix.rear-delay = 0
					channelmix.stereo-widen = 0
					channelmix.hilbert-taps = 0
				}

			}

			playback.props = {
				node.name = "X2HR Treatment Out"
				media.class = "X2HR Treatment Out"
				node.passive = true
				audio.channels = 2
				audio.position = [ FL FR ]
				target.object = "alsa_input.usb-MOTU_M2_M2MT15C48F-00.HiFi__m2_stereo_in_M2_0_0_1__source"
				stream.dont-remix = true
				stream.properties = {
					channelmix.upmix = false
					channelmix.upmix-method = none
					channelmix.disable = false
					channelmix.lfe-cutoff = 1000
					channelmix.lfe-cutoff - 20000
					channelmix.mix-lfe = false
					channelmix.rear-delay = 0
					channelmix.stereo-widen = 0
					channelmix.hilbert-taps = 0
				}
			}
		}
}

]

]
