#!/bin/sh

pidof -q gpu-screen-recorder && exit 0
#window=$(xdotool getactivewindow)
#window_name=$(xdotool getwindowname "$window" || xdotool getwindowclassname "$window" || echo "Game")
#window_name="$(echo "$window_name" | tr '/\\' '_')" # Replace `/` and `\` with `_`
#window_name="$(echo "$window_name" | awk '{for(i=1; i<=NF; i++) { if ($i ~ /[\(\)-]/) break; printf "%s", $i } print ""}')" # Extract words until a special character appears
#video="$(date +"%H-%M-%S.mkv")"
replay="$HOME/Videos/Recording/$(date +"%H-%M-%S.mkv")"
dunstify "GPU Screen Recorder" "Replay Started" && gpu-screen-recorder -w screen -c mkv -oc yes -a 'device:default_input|app-inverse:alsa_playback.librewolf|app-inverse:FireFox|app-inverse:ebur128.output|app-inverse:eq.output|app-inverse:mpv' -a "app-inverse:alsa_playback.librewolf|app-inverse:FireFox|app-inverse:ebur128.output|app-inverse:eq.output|app-inverse:mpv|app-inverse:Chromium" -a 'device:default_input' -a 'app:Chromium' -r 600 -restart-replay-on-save yes -k av1_10bit -tune quality -ac opus -fm content -f 120 -q ultra -cr full -df yes -o "$HOME/Videos/Recording" -keyint 1.0
